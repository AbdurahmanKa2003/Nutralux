 <!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <link rel="shortcut icon" href="images/favicon-32x32.png" type="image/x-icon" />

    <!-- SEO Meta Tags -->
    <title>Nutralux ‚Äî Vitamins and Supplements Store | Buy Vitamin C, Magnesium, Zinc</title>
    <meta name="description" content="Nutralux ‚Äî your reliable online store for vitamins and supplements. We offer quality products: vitamin C, magnesium, zinc, multivitamins, probiotics. Extensive catalog, detailed descriptions, fast delivery worldwide." />
    <meta name="keywords" content="Nutralux, vitamins, supplements, buy vitamins, vitamin C, magnesium, zinc, multivitamins, probiotics, health, supplement store, online vitamin store, immunity supplements, energy vitamins" />
    <meta name="author" content="Nutralux" />
    <link rel="canonical" href="https://yourwebsite.com/index.html" /> <!-- Replace with your actual website URL -->

    <!-- Open Graph Meta Tags (for social networks) -->
    <meta property="og:title" content="Nutralux ‚Äî Vitamins and Supplements Store" />
    <meta property="og:description" content="Nutralux ‚Äî your reliable online store for vitamins and supplements. We offer quality products: vitamin C, magnesium, zinc, multivitamins, probiotics. Extensive catalog, detailed descriptions, fast delivery worldwide." />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://yourwebsite.com/index.html" /> <!-- Replace with your actual website URL -->
    <meta property="og:image" content="https://yourwebsite.com/images/avatar.png" /> <!-- Replace with URL of your main image or logo -->
    <meta property="og:locale" content="en_US" />

    <!-- Twitter Card Meta Tags (for Twitter) -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Nutralux ‚Äî Vitamins and Supplements Store" />
    <meta name="twitter:description" content="Nutralux ‚Äî your reliable online store for vitamins and supplements. We offer quality products: vitamin C, magnesium, zinc, multivitamins, probiotics. Extensive catalog, detailed descriptions, fast delivery worldwide." />
    <meta name="twitter:image" content="https://yourwebsite.com/images/avatar.png" /> <!-- Replace with URL of your main image or logo -->

    <!-- box icons -->
    <link rel="stylesheet" href="https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css" />

    <!-- lang icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/lipis/flag-icons@6.11.0/css/flag-icons.min.css" />

    <!-- css -->
    <link rel="stylesheet" href="styles.css" />

    <!-- Schema.org JSON-LD Markup -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Nutralux",
      "url": "https://yourwebsite.com/", <!-- Replace with your website root URL -->
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://yourwebsite.com/catalog.html?q={search_term_string}", <!-- Replace with your search URL if available -->
        "query-input": "required name=search_term_string"
      }
    }
    </script>
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Organization",
      "name": "Nutralux",
      "url": "https://yourwebsite.com/", <!-- Replace with your website root URL -->
      "logo": "https://yourwebsite.com/images/favicon-32x32.png", <!-- Replace with your logo URL -->
      "sameAs": [
        "https://wa.me/905332452900",
        "https://www.tiktok.com/@nutraluxlife?_t=ZS-8yvEDo3bZth&_r=1",
        "https://t.me/nutralux",
        "https://clck.ru/3NQNkm"
      ],
      "contactPoint": {
        "@type": "ContactPoint",
        "telephone": "+905332452900",
        "contactType": "customer service",
        "areaServed": "US"
      }
    }
    </script>
   <style>
    #chat-widget {
  position: fixed;
  bottom: 90px;
  right: 20px;
  z-index: 9999;
  display: none;
  width: 350px;
  height: 450px;
  background: #fff;
  border: 1px solid #ccc;
  border-radius: 10px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.15);
  display: flex;
  flex-direction: column;
}

#chat-fab {
  position: fixed;
  bottom: 20px;
  right: 90px;
  z-index: 10000;
  display: flex;
  width: 60px;
  height: 60px;
  background: #4CAF50;
  color: white;
  border-radius: 50%;
  justify-content: center;
  align-items: center;
  font-size: 28px;
  cursor: pointer;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.footer-icon-top {
  position: fixed;
  bottom: 20px;
  right: 20px;
  z-index: 10001;
  background: #4CAF50;
  width: 50px;
  height: 50px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  box-shadow: 0 4px 8px rgba(0,0,0,0.2);
}

.footer-icon-top a {
  display: flex;
  justify-content: center;
  align-items: center;
  color: white;
  font-size: 24px;
  line-height: 1;
}

.chat-messages {
  flex-grow: 1;
  padding: 10px 15px;
  overflow-y: auto;
  background-color: #f9f9f9;
  display: flex;
  flex-direction: column;
  gap: 8px;
}

.chat-input-container {
  display: flex;
  padding: 10px 15px;
  border-top: 1px solid #eee;
  background-color: #fff;
  flex-shrink: 0;
}

.chat-input-container .chat-input {
  flex-grow: 1;
  padding: 8px;
  border: 1px solid #ccc;
  border-radius: 5px 0 0 5px;
  margin-right: -1px;
  font-size: 14px;
}

.chat-input-container .chat-send {
  background-color: #4CAF50;
  color: white;
  border: none;
  padding: 8px 12px;
  cursor: pointer;
  border-radius: 0 5px 5px 0;
  font-weight: bold;
  flex-shrink: 0;
}

.message {
  max-width: 80%;
  padding: 6px 10px;
  border-radius: 10px;
  word-wrap: break-word;
  font-size: 14px;
}

.bot-message {
  background-color: #e0f2f1;
  align-self: flex-start;
}

.user-message {
  background-color: #4CAF50;
  color: white;
  align-self: flex-end;
}
.chat-container {
    width: 100%;
    height: 100%; /* –ó–∞–Ω–∏–º–∞–µ—Ç –≤—Å—é –≤—ã—Å–æ—Ç—É —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ #chat-widget */
    display: flex;
    flex-direction: column; /* –≠–ª–µ–º–µ–Ω—Ç—ã (—à–∞–ø–∫–∞, —Å–æ–æ–±—â–µ–Ω–∏—è, –≤–≤–æ–¥) —Ä–∞—Å–ø–æ–ª–∞–≥–∞—é—Ç—Å—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ */
    overflow: hidden; /* –í–∞–∂–Ω–æ: –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–∫—Ä—É—Ç–∫—É –≤—Å–µ–≥–æ –≤–∏–¥–∂–µ—Ç–∞ */
}    
@media (max-width: 600px) {
  #chat-widget {
    width: 90%;
    height: 80%;
    bottom: 80px;
    right: 5%;
    left: 5%;
    border-radius: 15px;
  }
}
.chat-messages::-webkit-scrollbar {
  width: 6px;
}
.chat-messages::-webkit-scrollbar-thumb {
  background-color: #4CAF50;
  border-radius: 3px;
}
  </style>
  </head>

 <body>
    <header class="header">
        <a href="#home" class="logo">Nutralux</a>

        <i class="bx bx-menu" id="menu-icon"></i>

        <nav class="navbar">
            <a href="#about" class="active">About</a>
            <a href="#services" class="active">Services</a>
            <a href="catalog.html" class="active">Catalog</a>
            <a href="#contact" class="active">Contact</a>
            <a href="index-ru.html" class="active lang"><span class="fi fi-ru"></span></a>
        </nav>
    </header>

    <section class="home" id="home">
        <div class="home-content">
            <h1>Nutralux</h1>
            <h3>Store of <span class="multiple-text"></span></h3>
            <p>
                Vitamins and supplements for health: vitamin C, magnesium, zinc, multivitamins, probiotics and more. Quality
                formulations, clear dosage instructions, and personalized selection assistance.
            </p>
            <div class="social-media">
                <a href="https://wa.me/905332452900" target="_blank" aria-label="WhatsApp Nutralux"><i class="bx bxl-whatsapp"></i></a>
                <a href="https://www.tiktok.com/@nutraluxlife?_t=ZS-8yvEDo3bZth&_r=1" target="_blank" aria-label="TikTok Nutralux"><i class="bx bxl-tiktok"></i></a>
                <a href="https://t.me/nutralux" target="_blank" aria-label="Telegram Nutralux"><i class="bx bxl-telegram"></i></a>
                <a href="https://clck.ru/3NQNkm" target="_blank" aria-label="Instagram Nutralux"><i class="bx bxl-instagram"></i></a>
            </div>
            <a href="catalog.html" class="btn">Go to Catalog</a>
        </div>

        <div class="home-img">
            <img src="images/avatar.png" alt="Woman holding a bottle of Nutralux vitamins with green label" />
        </div>
    </section>

    <section class="about" id="about">
        <div class="about-img">
            <img src="images/about-image.png" alt="Collection of various Nutralux vitamin and supplement bottles on white background" />
        </div>

        <div class="about-content">
            <h2 class="heading">About <span>Nutralux Store</span></h2>
            <h3>Supplements and vitamins for daily support</h3>
            <p>
                We select proven supplements with clear compositions and dosages. We help choose complexes for your needs ‚Äî
                immunity, energy, sleep, skin beauty, and much more.
            </p>
            <p>Focus: vitamin C, magnesium, zinc, women's multivitamins, probiotics, and basic complexes.</p>
        </div>
    </section>

    <section class="services" id="services">
        <h2 class="heading">Our <span>Nutralux Services</span></h2>

        <div class="services-container">
            <div class="services-box">
                <i class="bx bx-support"></i>
                <h3>Vitamin Selection Consultation</h3>
                <ul>
                    <li>Help with choosing formulations and dosages</li>
                    <li>Basic intake recommendations</li>
                </ul>
            </div>

            <div class="services-box">
                <i class="bx bx-package"></i>
                <h3>Fast Worldwide Delivery</h3>
                <ul>
                    <li>Same-day order shipping</li>
                    <li>Order status tracking</li>
                </ul>
            </div>

            <div class="services-box">
                <i class="bx bx-check-shield"></i>
                <h3>Quality and Supplement Transparency</h3>
                <ul>
                    <li>Only verified suppliers</li>
                    <li>Clear labels and compositions</li>
                </ul>
            </div>
        </div>
    </section>

    <section class="portfolio" id="portfolio">
        <h2 class="heading">Popular <span>Nutralux Products</span></h2>
    
        <div class="portfolio-container">
            <div class="portfolio-box">
                <div class="portfolio-img">
                    <img src="images/omega-3.jpg" alt="Nutralux Omega-3 1000 mg bottle" />
                </div>
                <div class="portfolio-content">
                    <h4>Omega-3 1000 mg</h4>
                    <p>Brain, heart, and vision support</p>
                    <a href="product.html?slug=omega-3-1000" class="btn">Learn More</a>
                </div>
            </div>
    
            <div class="portfolio-box">
                <div class="portfolio-img">
                    <img src="images/womens-multivitamin.jpg" alt="Nutralux Women's Multivitamin bottle" />
                </div>
                <div class="portfolio-content">
                    <h4>Women's Multivitamin</h4>
                    <p>Daily balance and support</p>
                    <a href="product.html?slug=womens-multivitamin" class="btn">Learn More</a>
                </div>
            </div>
        </div>
    
        <div style="text-align:center; margin-top: 1.5rem;">
            <a href="catalog.html" class="btn">View Full Catalog</a>
        </div>
    </section>
    <section class="faq" id="faq">
        <h2 class="heading">Frequently Asked <span>Questions about Nutralux</span></h2>
    
        <div class="faq-container">
            <div class="faq-item">
                <h3>How fast is delivery?</h3>
                <p>Delivery usually takes 1-2 business days. We ship orders on the same day they are placed.</p>
            </div>
    
            <div class="faq-item">
                <h3>Can children take your vitamins?</h3>
                <p>Yes, we have special complexes for children. Please check the "For Kids" section in our catalog.</p>
            </div>
    
            <div class="faq-item">
                <h3>Are there discounts for multiple items?</h3>
                <p>Yes, for orders of 3 or more items, we offer discounts and free shipping.</p>
            </div>
    
            <div class="faq-item">
                <h3>What payment methods are available?</h3>
                <p>We accept card payments, e-wallets, and cash on delivery.</p>
            </div>
        </div>
    </section>
    <footer class="footer">
        <div class="footer-text">
            <p>¬© 2025 Nutralux</p>
        </div>

        <div class="footer-icon-top">
            <a href="#home"><i class="bx bx-up-arrow-alt"></i></a>
        </div>
    </footer>

    <div id="chat-fab" style="display: flex;">
        <i class="bx bx-chat"></i>
    </div>

    <div id="chat-widget" style="display: none;">
        <div class="chat-container">
            <div class="chat-header">–ß–∞—Ç-–±–æ—Ç Nutralux</div>
            <div class="chat-messages" id="chat-messages">
                <div class="message bot-message">
                    <strong>–ë–æ—Ç:</strong> –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –Ø —á–∞—Ç-–±–æ—Ç Nutralux. –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å?
                </div>
            </div>
            <div class="chat-input-container">
                <input type="text" class="chat-input" id="chat-input" placeholder="–ù–∞–ø–∏—à–∏—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ...">
                <button class="chat-send" id="chat-send">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
            </div>
        </div>
    </div>
    <script src="https://unpkg.com/scrollreveal"></script>

    <script src="https://cdn.jsdelivr.net/npm/typed.js@2.0.12"></script>

    <script src="script.js"></script>
    <script>
        /* to prevent Typed.js from breaking on pages without .multiple-text */
        if (typeof Typed !== 'undefined' && document.querySelector('.multiple-text')) {
            new Typed('.multiple-text', {
                strings: ['vitamins and supplements', 'daily health'],
                typeSpeed: 100,
                backSpeed: 100,
                backDelay: 1000,
                loop: true
            });
        }
    </script>
<script>
/* === üåø NUTRALUX SMART CHATBOT v2.0 === */
/* –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–æ–≥–æ –∏ –∞–Ω–≥–ª–∏–π—Å–∫–æ–≥–æ —è–∑—ã–∫–æ–≤, –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ, –≥–∏–±–∫–æ–µ –ø–æ–Ω–∏–º–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤ */

let lastLanguage = 'ru';

const chatWidget = document.getElementById('chat-widget');
const chatFab = document.getElementById('chat-fab');
const chatInput = document.getElementById('chat-input');
const chatSend = document.getElementById('chat-send');
const chatMessages = document.getElementById('chat-messages');

// --- –û—Ç–∫—Ä—ã—Ç–∏–µ / –∑–∞–∫—Ä—ã—Ç–∏–µ —á–∞—Ç–∞ ---
function toggleChat() {
  const isHidden = chatWidget.style.display === 'none' || chatWidget.style.display === '';
  chatWidget.style.display = isHidden ? 'flex' : 'none';
  chatFab.innerHTML = isHidden ? '<i class="bx bx-x"></i>' : '<i class="bx bx-chat"></i>';
  if (isHidden) setTimeout(() => chatInput.focus(), 200);
}
chatFab?.addEventListener('click', toggleChat);

// --- –ê–≤—Ç–æ–ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ ---
function greetUser() {
  if (!localStorage.getItem('nutraluxGreeted')) {
    addMessage("üëã Hello! / –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! I'm Nutralux AI assistant. Ask me about vitamins, health goals or supplements.");
    localStorage.setItem('nutraluxGreeted', 'true');
  }
}
document.addEventListener('DOMContentLoaded', greetUser);

// --- –ò—Å—Ç–æ—Ä–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π ---
function saveHistory() {
  localStorage.setItem('nutraluxChatHistory', chatMessages.innerHTML);
}
function loadHistory() {
  const saved = localStorage.getItem('nutraluxChatHistory');
  if (saved) chatMessages.innerHTML = saved;
}
window.addEventListener('beforeunload', saveHistory);
document.addEventListener('DOMContentLoaded', loadHistory);

// --- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ ---
function detectLanguage(text) {
  const hasRu = /[–∞-—è—ë]/i.test(text);
  const hasEn = /[a-z]/i.test(text);
  if (hasRu && !hasEn) return 'ru';
  if (hasEn && !hasRu) return 'en';
  return lastLanguage;
}

// --- –ë–∞–∑–∞ –ø—Ä–æ–¥—É–∫—Ç–æ–≤ ---
const products = [
  {slug:"ginkgo-biloba-500", name:{ru:"–ì–∏–Ω–∫–≥–æ –ë–∏–ª–æ–±–∞ 500 –º–≥", en:"Ginkgo Biloba 500 mg"},
   short:{ru:"–ü–∞–º—è—Ç—å, –≤–Ω–∏–º–∞–Ω–∏–µ, –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏–µ –º–æ–∑–≥–∞", en:"Memory, focus, brain circulation"},
   description:{ru:"–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–æ–∑–≥–æ–≤–æ–µ –∫—Ä–æ–≤–æ–æ–±—Ä–∞—â–µ–Ω–∏–µ –∏ –∫–æ–≥–Ω–∏—Ç–∏–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏: –ø–∞–º—è—Ç—å, –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏—é –∏ –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—é.",
                en:"Supports brain circulation and cognitive functions: memory, focus and coordination."}},
  {slug:"magnesium-b6", name:{ru:"–ú–∞–≥–Ω–∏–π B6", en:"Magnesium B6"},
   short:{ru:"–ù–µ—Ä–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞, —Å–æ–Ω, —É—Å–≤–æ–µ–Ω–∏–µ –º–∞–≥–Ω–∏—è", en:"Nervous system, sleep, magnesium absorption"},
   description:{ru:"–ü–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∏ —Ä–∞–∑–¥—Ä–∞–∂–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏, —Å–ø–∞–∑–º–∞—Ö –∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å–æ —Å–Ω–æ–º.", 
                en:"Helps with irritability, cramps and sleep problems."}},
  {slug:"vitamin-d3-10000", name:{ru:"–í–∏—Ç–∞–º–∏–Ω D3 10 000 –ú–ï", en:"Vitamin D3 10,000 IU"},
   short:{ru:"–ò–º–º—É–Ω–∏—Ç–µ—Ç, –∫–æ—Å—Ç–∏, —Å–æ—Å—É–¥—ã", en:"Immunity, bones, vessels"},
   description:{ru:"–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∏–º–º—É–Ω–∏—Ç–µ—Ç, –∑–¥–æ—Ä–æ–≤—å–µ –∫–æ—Å—Ç–µ–π –∏ —Å–æ—Å—É–¥–æ–≤.",
                en:"Supports immunity, bone and vascular health."}},
  {slug:"zinc-complex", name:{ru:"–¶–∏–Ω–∫ (–∫–æ–º–ø–ª–µ–∫—Å)", en:"Zinc Complex"},
   short:{ru:"–ò–º–º—É–Ω–∏—Ç–µ—Ç, –∫–æ–∂–∞, –æ–±–º–µ–Ω", en:"Immunity, skin, metabolism"},
   description:{ru:"–£–∫—Ä–µ–ø–ª—è–µ—Ç –∏–º–º—É–Ω–∏—Ç–µ—Ç –∏ —É–ª—É—á—à–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∫–æ–∂–∏.",
                en:"Strengthens immunity and improves skin condition."}},
  {slug:"omega-3-1000", name:{ru:"–û–º–µ–≥–∞-3 1000 –º–≥", en:"Omega-3 1000 mg"},
   short:{ru:"–ú–æ–∑–≥, —Å–µ—Ä–¥—Ü–µ, –∑—Ä–µ–Ω–∏–µ", en:"Brain, heart, vision"},
   description:{ru:"–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º–æ–∑–≥, —Å–µ—Ä–¥—Ü–µ –∏ –∑—Ä–µ–Ω–∏–µ.", 
                en:"Supports brain, heart and vision."}},
  {slug:"b-complex", name:{ru:"–í–∏—Ç–∞–º–∏–Ω B-–∫–æ–º–ø–ª–µ–∫—Å", en:"Vitamin B-Complex"},
   short:{ru:"–≠–Ω–µ—Ä–≥–∏—è, –Ω–µ—Ä–≤–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞", en:"Energy, nervous system"},
   description:{ru:"–ü–æ–≤—ã—à–∞–µ—Ç —ç–Ω–µ—Ä–≥–∏—é –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –Ω–µ—Ä–≤–Ω—É—é —Å–∏—Å—Ç–µ–º—É.",
                en:"Boosts energy and supports nervous system."}},
  {slug:"collagen-30-sachets", name:{ru:"–ö–æ–ª–ª–∞–≥–µ–Ω ‚Äî 30 —Å–∞—à–µ", en:"Collagen ‚Äî 30 sachets"},
   short:{ru:"–ö–æ–∂–∞, —Å—É—Å—Ç–∞–≤—ã, –≤–æ–ª–æ—Å—ã –∏ –Ω–æ–≥—Ç–∏", en:"Skin, joints, hair and nails"},
   description:{ru:"–£–ª—É—á—à–∞–µ—Ç —É–ø—Ä—É–≥–æ—Å—Ç—å –∫–æ–∂–∏ –∏ –∑–¥–æ—Ä–æ–≤—å–µ —Å—É—Å—Ç–∞–≤–æ–≤.",
                en:"Improves skin elasticity and joint health."}},
  {slug:"probiotic-30b", name:{ru:"–ü—Ä–æ–±–∏–æ—Ç–∏–∫", en:"Probiotic"},
   short:{ru:"–ú–∏–∫—Ä–æ–±–∏–æ–º –∏ –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏–µ", en:"Gut microbiome and digestion"},
   description:{ru:"–í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –º–∏–∫—Ä–æ—Ñ–ª–æ—Ä—É –∫–∏—à–µ—á–Ω–∏–∫–∞ –∏ –∏–º–º—É–Ω–∏—Ç–µ—Ç.",
                en:"Restores gut flora and supports immunity."}}
];

// --- –ü–æ–º–æ—â–Ω–∏–∫–∏ ---
function addMessage(text, type='bot') {
  const div = document.createElement('div');
  div.className = `message ${type}-message`;
  div.innerHTML = type === 'user'
    ? `<strong>${lastLanguage==='ru'?'–í—ã':'You'}:</strong> ${text}`
    : `<strong>${lastLanguage==='ru'?'–ë–æ—Ç':'Bot'}:</strong> ${text.replace(/\n/g,'<br>')}`;
  chatMessages.appendChild(div);
  chatMessages.scrollTo({top:chatMessages.scrollHeight, behavior:'smooth'});
}

function normalizeText(text) {
  return text.toLowerCase().replace(/[^\w–∞-—è—ë\s]/gi, '').trim();
}

// --- –ì–ª–∞–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ ---
function getAIResponse(message) {
  const lang = detectLanguage(message);
  lastLanguage = lang;
  const msg = normalizeText(message);

  // --- –û–±—â–∏–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è ---
  if (/(–ø—Ä–∏–≤–µ—Ç|–∑–¥—Ä–∞–≤—Å—Ç–≤|hi|hello|hey|start)/.test(msg)) {
    return lang === 'ru'
      ? "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! üëã –Ø AI-–∫–æ–Ω—Å—É–ª—å—Ç–∞–Ω—Ç Nutralux. –°–ø—Ä–æ—Å–∏—Ç–µ –º–µ–Ω—è, —á—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç ‚Äî –Ω–∞–ø—Ä–∏–º–µ—Ä: '–≤–∏—Ç–∞–º–∏–Ω—ã –¥–ª—è —Å–Ω–∞ –∏ –∏–º–º—É–Ω–∏—Ç–µ—Ç–∞'."
      : "Hello! üëã I'm Nutralux AI consultant. Ask me what you need ‚Äî for example: 'vitamins for sleep and immunity'.";
  }

  // --- –ü–æ–∫–∞–∑ –≤—Å–µ–≥–æ –∫–∞—Ç–∞–ª–æ–≥–∞ ---
  if (/(–≤–µ—Å—å –∫–∞—Ç–∞–ª–æ–≥|–≤—Å–µ —Ç–æ–≤–∞—Ä—ã|–ø–æ–∫–∞–∂–∏ –∫–∞—Ç–∞–ª–æ–≥|show all|all products|catalog)/.test(msg)) {
    let text = lang === 'ru' ? "üì¶ <b>–ö–∞—Ç–∞–ª–æ–≥ Nutralux:</b><br>" : "üì¶ <b>Nutralux Catalog:</b><br>";
    products.forEach(p => {
      text += `‚Ä¢ <a href="product.html?slug=${p.slug}" target="_blank">${p.name[lang]}</a> ‚Äî ${p.short[lang]}<br>`;
    });
    return text;
  }

  // --- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∑–∞–ø—Ä–æ—Å–∞ ---
  const patterns = {
    sleep: /(—Å–æ–Ω|—Å–ø–∞—Ç—å|sleep|insomnia|relax|night)/,
    energy: /(—ç–Ω–µ—Ä–≥|—É—Å—Ç–∞–ª|–≤—è–ª|—Å–∏–ª|energy|tired|fatigue|vitality)/,
    brain: /(–º–æ–∑–≥|–ø–∞–º—è—Ç|–≤–Ω–∏–º–∞–Ω|focus|brain|memory|concentrat)/,
    immunity: /(–∏–º–º—É–Ω–∏—Ç|–±–æ–ª–µ–∑–Ω|–≤–∏—Ä—É—Å|–ø—Ä–æ—Å—Ç—É–¥|immun|cold|health)/,
    beauty: /(–∫–æ–∂|–≤–æ–ª–æ—Å|–Ω–æ–≥—Ç|beauty|skin|hair|nails|collagen)/,
    stomach: /(–∂–µ–ª—É–¥|–ø–∏—â–µ–≤–∞—Ä|–∫–∏—à–µ—á|stomach|digest|gut|probiotic)/,
    heart: /(—Å–µ—Ä–¥—Ü|–¥–∞–≤–ª–µ–Ω|–∫–∞—Ä–¥–∏–æ|heart|blood|vessel|cholesterol)/,
    weight: /(–≤–µ—Å|–¥–∏–µ—Ç|–ø–æ—Ö—É–¥|slim|weight|fat|metabol)/,
  };

  const found = Object.keys(patterns).find(k => patterns[k].test(msg));

  // --- –û—Ç–≤–µ—Ç –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ ---
  if (found) {
    const filtered = products.filter(p => 
      p.short[lang].toLowerCase().includes(found) || 
      p.description[lang].toLowerCase().includes(found)
    );
    if (filtered.length > 0) {
      let answer = "";
      switch (found) {
        case 'sleep':
          answer = lang==='ru'
            ? "üò¥ <b>–î–ª—è —Å–Ω–∞ –∏ —Å–ø–æ–∫–æ–π—Å—Ç–≤–∏—è:</b><br>"
            : "üò¥ <b>For sleep and relaxation:</b><br>";
          break;
        case 'energy':
          answer = lang==='ru'
            ? "‚ö° <b>–î–ª—è —ç–Ω–µ—Ä–≥–∏–∏ –∏ –±–æ–¥—Ä–æ—Å—Ç–∏:</b><br>"
            : "‚ö° <b>For energy and vitality:</b><br>";
          break;
        case 'immunity':
          answer = lang==='ru'
            ? "üõ°Ô∏è <b>–î–ª—è –∏–º–º—É–Ω–∏—Ç–µ—Ç–∞ –∏ –∑–∞—â–∏—Ç—ã:</b><br>"
            : "üõ°Ô∏è <b>For immunity and protection:</b><br>";
          break;
        case 'beauty':
          answer = lang==='ru'
            ? "üíÖ <b>–î–ª—è –∫–æ–∂–∏, –≤–æ–ª–æ—Å –∏ –Ω–æ–≥—Ç–µ–π:</b><br>"
            : "üíÖ <b>For skin, hair and nails:</b><br>";
          break;
        default:
          answer = "";
      }

      filtered.forEach(p => {
        answer += `‚Ä¢ <a href="product.html?slug=${p.slug}" target="_blank">${p.name[lang]}</a> ‚Äî ${p.short[lang]}<br>`;
      });

      // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–≤–µ—Ç –ø–æ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é
      answer += lang === 'ru'
        ? "<br>üí° –ü—Ä–∏–Ω–∏–º–∞–π—Ç–µ –¥–æ–±–∞–≤–∫–∏ —Ä–µ–≥—É–ª—è—Ä–Ω–æ 1‚Äì2 –º–µ—Å—è—Ü–∞ –¥–ª—è –≤—ã—Ä–∞–∂–µ–Ω–Ω–æ–≥–æ —ç—Ñ—Ñ–µ–∫—Ç–∞."
        : "<br>üí° Take supplements regularly for 1‚Äì2 months for visible results.";
      return answer;
    }
  }

  // --- –û–±—â–∞—è –ø–æ–º–æ—â—å ---
  if (/(–ø–æ–º–æ—â|help|what can you|—á—Ç–æ —Ç—ã —É–º–µ|how work)/.test(msg)) {
    return lang === 'ru'
      ? "–Ø –ø–æ–º–æ–≥—É –ø–æ–¥–æ–±—Ä–∞—Ç—å –¥–æ–±–∞–≤–∫–∏ –¥–ª—è —Å–Ω–∞, —ç–Ω–µ—Ä–≥–∏–∏, –∏–º–º—É–Ω–∏—Ç–µ—Ç–∞, –∫–æ–∂–∏, —Å–µ—Ä–¥—Ü–∞, –ø–∏—â–µ–≤–∞—Ä–µ–Ω–∏—è –∏ –¥—Ä—É–≥–∏—Ö —Ü–µ–ª–µ–π.\n–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –Ω–∞–ø–∏—Å–∞—Ç—å: ¬´–≤–∏—Ç–∞–º–∏–Ω—ã –æ—Ç —É—Å—Ç–∞–ª–æ—Å—Ç–∏¬ª –∏–ª–∏ ¬´–¥–ª—è –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏¬ª."
      : "I can help you find supplements for sleep, energy, immunity, skin, heart, digestion and more.\nTry typing: 'something for tiredness' or 'for focus'.";
  }

  // --- –û—Ç–≤–µ—Ç –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é ---
  return lang === 'ru'
    ? "ü§î –Ø –Ω–µ —Å–æ–≤—Å–µ–º –ø–æ–Ω—è–ª. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ —É—Ç–æ—á–Ω–∏—Ç—å, —á—Ç–æ –≤–∞—Å –∏–Ω—Ç–µ—Ä–µ—Å—É–µ—Ç ‚Äî —Å–æ–Ω, —ç–Ω–µ—Ä–≥–∏—è, –∏–º–º—É–Ω–∏—Ç–µ—Ç –∏–ª–∏ –∫—Ä–∞—Å–æ—Ç–∞?"
    : "ü§î I didn‚Äôt quite catch that. Try specifying what you need ‚Äî sleep, energy, immunity or beauty?";
}

// --- –ë–µ–∑–æ–ø–∞—Å–Ω—ã–π –≤—ã–∑–æ–≤ ---
function safeAIResponse(msg) {
  try { return getAIResponse(msg); }
  catch(e) {
    console.error(e);
    return lastLanguage==='ru'
      ? "‚ö†Ô∏è –ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞."
      : "‚ö†Ô∏è An error occurred while processing your request.";
  }
}

// --- –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π ---
function sendMessage() {
  const text = chatInput.value.trim();
  if (!text) return;
  addMessage(text, 'user');
  chatInput.value = '';
  chatSend.disabled = true; chatInput.disabled = true;

  const typing = document.createElement('div');
  typing.id = 'typing-indicator';
  typing.className = 'message bot-message';
  typing.innerHTML = `<strong>${lastLanguage==='ru'?'–ë–æ—Ç':'Bot'}:</strong> <em>${lastLanguage==='ru'?'–Ω–∞–±–∏—Ä–∞–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ...':'typing...'}</em>`;
  chatMessages.appendChild(typing);
  chatMessages.scrollTo({top:chatMessages.scrollHeight, behavior:'smooth'});

  setTimeout(() => {
    typing.remove();
    const reply = safeAIResponse(text);
    addMessage(reply, 'bot');
    chatSend.disabled = false; chatInput.disabled = false;
    chatInput.focus();
  }, 1000);
}

chatSend?.addEventListener('click', sendMessage);
chatInput?.addEventListener('keypress', e => { if (e.key === 'Enter') sendMessage(); });

/* --- UX —É–ª—É—á—à–µ–Ω–∏—è --- */
chatInput?.addEventListener('focus',()=>chatInput.placeholder='');
const style = document.createElement('style');
style.innerHTML = `
@media (max-width:600px){
  #chat-widget{width:90%;height:80%;bottom:80px;left:5%;right:5%;border-radius:15px;}
}
.chat-messages::-webkit-scrollbar{width:6px;}
.chat-messages::-webkit-scrollbar-thumb{background:#4CAF50;border-radius:3px;}
`;
document.head.appendChild(style);
</script>
